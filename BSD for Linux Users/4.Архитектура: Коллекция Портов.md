**Коллекция Портов**

Затем есть вторая категория; те программы, которые являются дополнительными пакетами. В мире BSD это обычно называют «системой портов». Это имя выбрано по определенной причине.

Традиционно, когда вы хотели запустить пакет в своей системе, первое, что вам нужно было сделать, это скомпилировать его. И часто, прежде чем вы сможете скомпилировать его, вам придется возиться с этим. Вашей системе потребуются другие заголовочные файлы. Иногда манифест константы могут быть другими. Иногда вам даже нужно переписать некоторые его части с нуля из-за базового предположения, которое не выполнялось в вашей системе.

Или, другими словами, вам придется «перенести» его на свою ОС и / или на конкретную систему. Основная цель системы портов состоит в том, чтобы сделать все эти «портирующие» вещи для вас. То, что он также автоматизирует сборку и установку и предоставляет упаковочные сервисы (для таких вещей, как «удаление»), не так хорошо отражено в названии.

Но, как и во многих других вещах, оно превратилось из своего имени в зверя, каким оно является сегодня. В текущей коллекции портов FreeBSD содержится около 10 000 пакетов (это число, конечно, быстро устареет, но такова природа разработки). Самая очевидная особенность портов заключается в том, что они все время строят из исходного кода, а не просто устанавливают предварительно собранные двоичные файлы. Это, похоже, еще одно явное различие, которое сбивает людей с толку, когда они пытаются взглянуть на BSD с точки зрения Linux. То, что он строится из исходного кода, является просто побочным эффектом, а не основной целью или различием. Бинарные пакеты также доступны; фактически бинарные пакеты создаются из дерева портов!

Теперь верно, что большинство пользователей Linux устанавливают бинарные пакеты, а большинство пользователей BSD устанавливают с помощью сборки из исходного кода. Отчасти это результат работы инструментов; Система портов разработана на основе концепции сборки из исходного кода, с возможностью создания и установки бинарных пакетов, которая является чем-то запоздалым, в то время как пакеты Linux, такие как RPM и dpkg и т. д., основаны на концепции установки бинарного пакета со сборкой. из источника как запоздалая мысль. Часть этого является исторической; Исторически сложилось, что двоичная упаковка не является доминирующей темой в системах Unix, как я упоминал ранее. В этом отношении упаковка сама по себе является более свежей вещью. Традиционно вы будете иметь дело с удалением и так далее вручную.

Gentoo - это дистрибутив Linux, завоевавший известность в наши дни. Одним из главных преимуществ ее продажи является ее система портежей, которая часто считается очень похожей на порты BSD. Возможно, наиболее наглядно, поскольку он компилируется из исходного кода. Это позволяет избежать многих проблем с бинарными пакетами. Я никогда не использовал это сам, но впечатления, которые я получил от информации, которую я видел на этом, и от людей, которых я знаю, кто использовал это, - то, что это взяло некоторые хорошие идеи от всех, и обескуражило их вместе. Будет очень интересно посмотреть, как он будет развиваться и развиваться в течение следующих нескольких лет. Это все еще намного больше Linux, чем BSD, но вполне может быть ближе к стилю BSD основных дистрибутивов Linux.

Теперь у прекомпилированных двоичных файлов есть свои преимущества; в основном это время (как и намного меньше), и обычно для установки предварительно скомпилированного пакета требуется гораздо меньше места, чем для компиляции пакета. Есть также преимущества для сборки из исходного кода, например, избегание всякого рода уродливых версий библиотек (моя личная любимая мозоль с бинарными пакетами). Вы можете установить бинарные пакеты на Linux или BSD; Вы можете собрать из исходного кода на Linux или BSD. Но пользователи, кажется, смещены по-разному, потому что системы смещены по-разному, потому что пользователи смещены по-разному ... все это соответствует.

Я думаю, что здесь важно понять, что разница между портами и RPM заключается не только в том, что порты компилируются, а RPM просто устанавливаются. Порты спроектированы таким образом, чтобы охватывать весь спектр деталей для установки; кодирование, отслеживание и установка зависимостей, упаковка, установка и удаление, локальные изменения, необходимые для сборки в вашей системе, настройки во время компиляции ... все это. RPM - это просто бинарный пакет. Если вы хотите автоматически устанавливать зависимости, вам нужен высокоуровневый инструмент, например, urpmi или apt-get. И, поскольку это бинарный файл, вам приходится иметь дело с конфликтами версий библиотек, отсутствующими опциями компиляции или любыми другими ограничениями, которые возникают у вас из-за того, что вы не собираете его в своей собственной системе.

Кроме того, порты, как и остальные системы BSD, централизованы. «Дерево портов» на самом деле представляет собой просто большое дерево каталогов с кучей категоризированных каталогов, каждое из которых содержит Makefile с некоторыми определениями переменных, файл контрольной суммы, список упаковки и различные другие возможные вещи. Каждый из этих каталогов представляет собой отдельную программу, которая описывается имеющимися файлами. За кулисами происходит куча черной магии, так что когда вы запускаете make, он находит и загружает дистрибутивный файл, где бы он ни находился, вносит любые необходимые изменения или исправления, рекурсивно находит и устанавливает все зависимости, вызывает GNU configure или imake или что-то еще подготовка программ необходима с правильными параметрами, запускает компиляцию с правильными параметрами и т. д.

Но все эти файлы в этом большом дереве каталогов поддерживаются самим проектом FreeBSD. Например, когда кто-то писал KDE, он не везде появлялся в деревьях портов. Кто-то должен был написать весь необходимый «клей», чтобы построить для него порт, а затем зафиксировать файлы в репозитории FreeBSD CVS, чтобы он был в коллекции портов. Итак, еще раз, есть некоторый уровень гарантии того, что он работает с другими вещами в коллекции портов. Любые зависимости, которые у него есть, будут там, потому что он не может объявить зависимость от чего-то, чего нет в портах.

Вещи ломаются, конечно. Возможно, у основного сайта исчезнет зависимость, поэтому никто не сможет скачать исходный файл и начать его установку. Возможно, новая версия какой-то третьей программы сломает программу, что не позволит другим вещам, которые зависят от нее, работать. Конечно, это не решает всех проблем. Но частота «я хочу A, для которого требуется B, которого я не могу найти», намного меньше, чем в таких существенно децентрализованных системах, как RPM.

Для более подробной информации (как всегда) см. Раздел в руководстве о портах.
