Все BSD поддерживают систему под контролем версий; все бесплатные BSD используют CVS. Контроль версий (вкратце) - это процесс, при котором редактирование программы означает извлечение файла или группы файлов, внесение изменений, затем проверка новых версий вместе с сообщением, описывающим изменение. Полная история всех изменений хранится в системе контроля версий, поэтому вы можете просмотреть историю изменений, проверить старую версию, посмотреть на различия между произвольными версиями и т. Д.

Все BSD так или иначе предоставляют открытый доступ к своим хранилищам CVS; как правило, через анонимный CVS или извлечение CVSup или зеркалирование, или часто оба. Это означает, что, как пользователь, вы можете точно видеть, какие изменения произошли, когда, кто их сделал и почему они их сделали. Вы также всегда можете получить последние изменения (в любом случае, в течение нескольких часов, в зависимости от стратегии зеркалирования). Все бесплатные BSD имеют списки рассылки, на которые вы можете подписаться и видеть изменения по мере их внесения. На самом деле, у всех них есть веб-интерфейсы; вы можете просмотреть все дерево исходных текстов FreeBSD в Интернете по адресу http://cvsweb.freebsd.org/src/ и просмотреть всю историю каждого файла.

Исторически в Linux не использовалось никакого контроля версий для ядра. Где-то в середине 2,4 дня ядро ​​стало храниться в общедоступном репозитории BitKeeper. Во многих других утилитах используется контроль версий, но, поскольку они все разработаны отдельно, нет централизованного места, куда можно было бы перейти, чтобы просмотреть изменения. Поэтому иногда трудно получить историческую картину хотя бы одной части; сделать это для всего распределения практически невозможно.

Примечание. По поводу последнего абзаца возникли разногласия. Хотя многие разработчики использовали CVS для частей ядра, в доступной информации говорится, что Линус никогда не использовал его для ядра, поэтому до перехода на Bitkeeper все это не было в единой системе контроля версий. Смотрите эту статью для деталей.

Это приводит к большому количеству различий. В очень реальном смысле системы BSD постоянно развиваются; Я всегда могу обновить свою систему до абсолютно нового кода, независимо от «релизов». В Linux это не имеет особого значения, потому что процесс выпуска сильно отличается. Я думаю, что наиболее подходящий глагол для релиза Linux "собран". Релиз Linux собран из версии A.B этой программы, плюс версия C.D этой программы, плюс версия E.F этой программы ... все вместе с версией X.Y.Z ядра Linux. В BSD, тем не менее, поскольку все части разрабатываются вместе, глагол «вырезать» имеет гораздо больше смысла; релиз «обрезается» в определенное время.

Linux выпускает ядра в две параллельные линии (ну, часто больше, чем 2, но мы упрощаем); версия с нечетным второстепенным номером выпуска в качестве «производственной» версии и версия с четным второстепенным номером выпуска в качестве «производственной» версии. У BSD также есть треки "разработки" и "производства", но они обрабатываются довольно по-разному.

CVS, как и большинство систем контроля версий, имеет концепцию «ветвей». Это легко понять, но несколько сложно объяснить. По сути, когда вы «разветвляете» файл или набор файлов (или целое дерево каталогов), вы создаете новую версию файла, которая существует параллельно с основной версией. Когда вы вносите изменения в основную версию, это не влияет на разветвленную версию. И вы можете вносить изменения в разветвленную версию, не влияя на основной.

Во FreeBSD обычно есть две активные линии разработки; одна называется "-CURRENT", которая является версией для разработки, а другая называется "-STABLE", которая является рабочей версией. Оба, конечно, находятся в стадии разработки, и у обоих есть попытка сделать их пригодными для использования. -STABLE, как правило, получает исправления ошибок и безопасности, но получает только новые функции и такие, которые хорошо протестированы, обычно в -CURRENT в первую очередь. -CURRENT получает новые функции, большие архитектурные изменения и все эти новые разработки. Следует отметить, что наименование ветвей не обязательно означает то, что кажется; в то время как -STABLE обычно является «стабильным», как в «надежном», это не всегда. Термин «стабильный» больше относится к тому факту, что в самой кодовой базе не было внесено серьезных изменений.

В мире Linux Debian делает то же самое с их разработкой релизов. У них есть «стабильный» выпуск, который в основном получает только основные исправления. Это примерно то же самое, что и FreeBSD-RELEASE. Затем у них есть «тестовая» версия, которая получает больше возможностей для новых функций, но только после того, как они некоторое время тестировались и, похоже, не имеют серьезных проблем. Это похоже на ветку FreeBSD -STABLE. И у них «нестабильный» выпуск, в котором происходят новые разработки, разрабатываются новые функции и появляются новые версии пакетов. Это соответствует ветке FreeBSD -CURRENT. (Примечание: я не очень хорошо знаю процесс выпуска Debian; это мое понимание этого, которое может быть совершенно неверным. Надеюсь, кто-нибудь пришлет мне правильную информацию, если я так сделаю.)

Я повторяю, потому что это важно; это филиалы. Не отпускает. Ветви. Они не очки; они - постоянные потоки развития, меняющиеся от дня к дню, от часа к часу и часто от минуты к минуте. Если я возьму -STABLE сейчас и -STABLE завтра, они, скорее всего, будут другими. Однако, поскольку он находится под контролем редакции, я могу сказать что-то вроде «Дай мне -STABLE по состоянию на 23:30 13 октября 2003 года» и всегда возвращать один и тот же код.

На самом деле, это все, что есть релиз; снимок в некоторой точке вдоль ветви. Например, то, что мы называем «2.2.6-RELEASE», на самом деле является просто снимком того, как ветка 2.2-STABLE выглядела 24 марта 1998 года. 25 марта она называлась «2.2.6-STABLE», хотя практически ничего не изменилось. И он продолжал называться «2.2.6-STABLE» до 21 июля, когда новый снимок назывался «2.2.7-RELEASE». И так далее, по линии.

Теперь вы заметите, что на этих ветках тоже есть нумерация. У нас есть 2.1-STABLE, и 2.2-STABLE, и 3-STABLE, и 4-STABLE. Чтобы понять это, посмотрим, откуда берутся эти ветви. В какой-то момент был 3-х ток. В терминах CVS это была ГОЛОВА дерева; не ветка, а основная линия. В конце концов, было время, когда было решено начать готовить этот филиал к производству, поэтому был установлен тег с объявлением определенного пункта как «3.0-RELEASE». В то время 3-ветвь была все еще -CURRENT; 2.2 был -STABLE. Когда мы подошли к 3.1-RELEASE, было решено, что пришло время создать ветку 3-STABLE. Итак, ветвь была создана и названа «3-STABLE», а -CURRENT был переименован в «4-CURRENT».

То же самое происходило (примерно), когда 4 стало -STABLE и -CURRENT стало 5, и то же самое произойдет снова, когда 5 станет -STABLE и -CURRENT переместится на 6. Иногда перед выпадением ветки обрезается только выпуск x.0 -STABLE, иногда .1 и даже .2 являются. 5.0-RELEASE - это моментальный снимок 5-CURRENT. Так что это 5.1-релиз. Так что это 5.2-релиз. В настоящее время план для 5.3-RELEASE будет первым -RELEASE из создаваемой ветви 5-STABLE, хотя это может измениться. Все зависит от состояния дерева.

Вы, конечно, заметите, что, хотя 4.x или 4-STABLE все еще (на данный момент) «производственный» поток, этот 3-STABLE все еще существует (хотя он не получал никаких изменений в течение длительного времени ). В этом отношении 2.2-STABLE и 2.1-STABLE все еще существуют, хотя они не получили никаких изменений даже дольше. Условно -STABLE без номера относится к последней ветке -STABLE. На самом деле, единственное время, когда возникает путаница, это когда новая ветвь только что была создана, поэтому многие люди все еще используют старую ветку. И тогда вы можете просто использовать номер, чтобы сделать его однозначным.

Также обратите внимание, что 5.1-RELEASE произошло до 4.9-RELEASE. И 5.0-РЕЛИЗ был до 4.8-РЕЛИЗ. Это время, когда одна ветвь находится в завершающих днях, а другая ветвь - в начальных днях, когда все становится по-настоящему запутанным. Именно тогда возникает разница -CURRENT и -STABLE. Чтобы сделать очень грубую аналогию, 5-CURRENT похож на Linux 2.5, а 4-STABLE - на Linux 2.4. Но до этого 4-CURRENT был похож на Linux 2.3, а в будущем 5-STABLE будет похож на Linux 2.6. Конечно, это не идеальная аналогия, отчасти потому, что мы говорим о полной системе со всеми ее частями, а не только с ядром. Но это достаточно близко, чтобы понять.

Так. Что это все значит? Возможно, немного. Но на этом фоне, возможно, вы сможете лучше понять, что происходит, когда и что означают названия веток и номера выпусков.

Еще немного информации о -CURRENT vs -STABLE доступно в справочнике FreeBSD. В документации также есть статья о процессе разработки релиза.

Релизы стареют
Итак, теперь вы лучше понимаете, откуда берутся релизы, и что это за чепуха -CURRENT и -STABLE. Но все релизы со временем устаревают, и их нужно обновлять. Итак, давайте перейдем к обновлению.
